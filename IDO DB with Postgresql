Icinga web integration with Postgresql

#install postgresql
yum install postgresql-server postgresql
#intialize postgressql
service postgresql initdb
#start service
chkconfig postgresql on
service postgresql start

#Installing the IDO modules for PostgreSQL
yum install icinga2-ido-pgsql

#Setting up the PostgreSQL database
cd /tmp
sudo -u postgres psql -c "CREATE ROLE icinga WITH LOGIN PASSWORD 'icinga'"
sudo -u postgres createdb -O icinga -E UTF8 icinga
sudo -u postgres createlang plpgsql icinga


#vim /var/lib/pgsql/data/pg_hba.conf
#add
# icinga
local   icinga      icinga                            md5
host    icinga      icinga      127.0.0.1/32          md5
host    icinga      icinga      ::1/128               md5

#restart service
service postgresql restart
#import the Icinga 2 IDO schema
# export PGPASSWORD=icinga
# psql -U icinga -d icinga < /usr/share/icinga2-ido-pgsql/schema/pgsql.sql

#Enabling the IDO PostgreSQL module
vim /etc/icinga2/features-available/ido-pgsql.conf
#add
library "db_ido_pgsql"

object IdoPgsqlConnection "pgsql-ido" {
  host = "127.0.0.1"
  port = 5432
  user = "icinga"
  password = "icinga"
  database = "icinga"

  cleanup = {
    downtimehistory_age = 48h
    contactnotifications_age = 31d
  }
}
#added

#enable Module
icinga2 feature enable ido-pgsql
